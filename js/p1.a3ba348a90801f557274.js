(()=>{"use strict";const e=function(e){return Math.floor(Math.random()*e)},t=document.querySelector(".time"),n=document.querySelector(".greeting"),o=document.querySelector(".name"),a=document.querySelector(".date"),r=document.querySelector(".city"),l=(document.querySelector(".player"),document.querySelector(".slide-prev")),u=document.querySelector(".slide-next"),c=document.querySelector(".change-bg"),s=document.querySelector(".body"),i=document.querySelector(".weather-icon"),d=document.querySelector(".temperature"),m=document.querySelector(".weather-description"),g=document.querySelector(".wind"),p=document.querySelector(".humidity"),y=document.querySelector(".weather-error"),S=document.querySelector(".change-quote"),h=document.querySelector(".quote"),v=document.querySelector(".author"),w=document.querySelector(".play-prev"),f=document.querySelector(".play"),q=document.querySelector(".play-next"),L=document.querySelector(".play-list"),$=document.querySelector(".player-controls"),b=document.querySelector(".todo-input"),j=document.querySelector(".time-line"),N=document.querySelector(".time__progress"),I=document.querySelector(".current-time"),k=document.querySelector(".current-song"),E=document.querySelector(".length"),C=document.querySelector(".volume-control"),x=document.querySelector(".volume-current"),M=document.querySelector(".volume"),T=document.querySelector(".volume-icon"),P=document.querySelector(".select-language"),W=document.querySelector(".lang-label"),D=new Audio,H=["01.jpg","02.jpg","03.jpg","04.jpg","05.jpg","06.jpg","07.jpg","08.jpg","09.jpg","10.jpg","11.jpg","12.jpg","13.jpg","14.jpg","15.jpg","16.jpg","17.jpg","18.jpg","19.jpg","20.jpg"],_=[{en:"Temperature",ru:"Температура"},{en:"Weend speed",ru:"Скорость ветра"},{en:"m/s",ru:"м/c"},{en:"Humidity",ru:"Влажность"}],R=[{en:"Good morning",ru:"Доброе утро"},{en:"Good afternoon",ru:"Добрый день"},{en:"Good evening",ru:"Добрый вечер"},{en:"Good night",ru:"Доброй ночи"}],A=[{en:"[What is your focus today?]",ru:"[На чём вы сфокусированы сегодня?]"}],G=[{en:"[enter your name]",ru:"[введите ваше имя]"}],U=[{en:"Minsk",ru:"Минск"}],F=[{en:"Language",ru:"Язык"},{en:"English",ru:"Русский"}],O={randomNumber:e(H.length),isPlay:!1,playNum:0,lang:"en"},J=function(e="en"){const t=new Date;let n;n="en"===O.lang?"en-US":"ru-RU";const o=t.toLocaleDateString(n,{weekday:"long",month:"long",day:"numeric"});a.innerHTML=`${o}`},X=function e(o="en"){const a=new Date;let r;r="en"===O.lang?"en-US":"ru-RU";const l=a.toLocaleTimeString(r);t.innerHTML=`${l}`,J(o),function(){let e=(new Date).getHours();n.innerHTML=e<12?`${R[0][O.lang]},`:e<17?`${R[1][O.lang]},`:e<21?`${R[2][O.lang]},`:`${R[3][O.lang]},`}(),setTimeout(e,1e3)},Y=function(e){const t=function(){let e,t=(new Date).getHours();return e=t<12?"morning":t<17?"afternoon":t<21?"evening":"night",e}(),n=new Image;n.src=`https://raw.githubusercontent.com/Webs95/stage1-tasks/assets/images/${t}/${H[e]}`,n.onload=()=>{s.style.backgroundImage=`url(${n.src})`}};async function z(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${r.value||localStorage.getItem(r)}&lang=${O.lang}&appid=e7e2edbdcf025cbe0798941809b01f4b&units=metric`,t=await fetch(e),n=await t.json();200===t.status?(i.className="weather-icon owf",i.classList.add(`owf-${n.weather[0].id}`),d.textContent=`${_[0][O.lang]}: ${n.main.temp.toFixed(0)}°C`,m.textContent=n.weather[0].description,g.textContent=`${_[1][O.lang]}: ${Math.floor(n.wind.speed)} ${_[2][O.lang]}`,p.textContent=`${_[3][O.lang]}: ${Math.floor(n.main.humidity)}%`,y.textContent=""):y.textContent="Error ❗ The entered data is not correct."}document.addEventListener("DOMContentLoaded",z),r.addEventListener("keypress",(function(e){"Enter"===e.code&&(z(),r.blur())}));const B=z,K=async function(){let t;t="en"===O.lang?"data/data.json":"data/dataRu.json";const n=await fetch(t),o=await n.json();let a=e(o.length);h.textContent=`"${o[a].text}"`,v.textContent=o[a].author},Q=[{title:"Aqua Caelestis",src:"https://github.com/Webs95/stage1-tasks/raw/momentum/assets/sounds/Aqua%20Caelestis.mp3",duration:"0:39"},{title:"Ennio Morricone",src:"https://github.com/Webs95/stage1-tasks/raw/momentum/assets/sounds/Ennio%20Morricone.mp3",duration:"1:37"},{title:"River Flows In You",src:"https://github.com/Webs95/stage1-tasks/raw/momentum/assets/sounds/River%20Flows%20In%20You.mp3",duration:"1:37"},{title:"Summer Wind",src:"https://github.com/Webs95/stage1-tasks/raw/momentum/assets/sounds/Summer%20Wind.mp3",duration:"1:50"}],V=function(){D.src=Q[O.playNum].src,k.textContent=Q[O.playNum].title,E.textContent=Q[O.playNum].duration,O.isPlay?(D.pause(),O.isPlay=!1,f.classList.toggle("pause")):(D.play(),O.isPlay=!0,f.classList.toggle("pause"))},Z=function(){O.playNum==Q.length-1?O.playNum=0:O.playNum++,k.textContent=Q[O.playNum].title,D.src=Q[O.playNum].src,D.play(),O.isPlay=!0,f.classList.add("pause")},ee=function(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`},te=function(){O.lang=P.value,B(O.lang),X(O.lang),K(O.lang),localStorage.setItem("language",JSON.stringify(O.lang)),b.placeholder=`${A[0][O.lang]}`,o.placeholder=`${G[0][O.lang]}`,r.value=`${U[0][O.lang]}`,W.textContent=`${F[0][O.lang]}:`};window.addEventListener("beforeunload",(function(){localStorage.setItem("name",o.value),localStorage.setItem("city",r.value),localStorage.setItem("todo",b.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(o.value=localStorage.getItem("name")),localStorage.getItem("city")&&(r.value=localStorage.getItem("city")),localStorage.getItem("todo")&&(b.value=localStorage.getItem("todo")),localStorage.getItem("language")&&(P.value=JSON.parse(localStorage.getItem("language")))})),c.addEventListener("click",(async function(){let t,n=(new Date).getHours();n>6&&n<10&&(t="morning"),n>=10&&n<18&&(t="afternoon"),n>=18&&n<23&&(t="evening"),n>23&&n<6&&(t="night");const o=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=87c3d75069be0df4dc966c8c57017b9c&tags=landscape,mountains,nature,${t},sky,sea&extras=url_l&format=json&nojsoncallback=1`,a=await fetch(o),r=await a.json();let l=e(100);const u=r.photos.photo[l].url_l,c=new Image;c.src=u,c.onload=()=>s.style.backgroundImage=`url('${u}')`})),P.addEventListener("change",te),b.placeholder=`${A[0][O.lang]}`,o.placeholder=`${G[0][O.lang]}`,k.textContent=`${Q[0].title}`,E.textContent=`${Q[0].duration}`,r.value=localStorage.getItem(r)||"Minsk",u.addEventListener("click",(()=>function(e){let t=0;t=19===e?0:e+1,Y(t),O.randomNumber=t}(O.randomNumber))),l.addEventListener("click",(()=>function(e){let t=0;t=0===e?19:e-1,Y(t),O.randomNumber=t}(O.randomNumber))),S.addEventListener("click",(()=>K())),$.addEventListener("click",(e=>{const t=e.target;t===f&&V(),t===q&&Z(),t===w&&(0==O.playNum?O.playNum=Q.length-1:O.playNum--,k.textContent=Q[O.playNum].title,D.src=Q[O.playNum].src,D.play(),O.isPlay=!0,f.classList.add("pause"))})),D.addEventListener("ended",Z),j.addEventListener("click",(e=>{const t=window.getComputedStyle(j).width;let n=e.offsetX/parseInt(t)*D.duration;D.currentTime=n})),setInterval((()=>{N.style.width=D.currentTime/D.duration*100+"%",I.textContent=ee(D.currentTime)}),300),C.addEventListener("click",(e=>{const t=window.getComputedStyle(C).width,n=e.offsetX/parseInt(t);D.volume=n,x.style.width=100*n+"%"})),M.addEventListener("click",(()=>{D.muted=!D.muted,D.muted?(T.classList.remove("volume-up"),T.classList.add("volume-no")):(T.classList.add("volume-up"),T.classList.remove("volume-no"))})),D.addEventListener("loadeddata",(()=>{E.textContent=ee(D.duration),D.volume=.75})),Q.forEach((e=>{const t=document.createElement("li");L.append(t),t.classList.add("play-item"),t.textContent=`${e.title} ${e.duration}`})),window.addEventListener("load",(function(){K(O.lang),Y(O.randomNumber),B(),X(O.lang),te()}));const ne=document.querySelectorAll(".play-item");ne.forEach(((e,t)=>{e.addEventListener("click",(()=>{O.playNum===t&&!0===O.isPlay?(O.isPlay=!0,ne[O.playNum].classList.add("play-item_active")):(O.isPlay=!1,f.classList.remove("pause"),ne[O.playNum].classList.remove("play-item_active")),O.playNum=t,V()}))}))})();